<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.10"/>
<title>geopm: geopm::LockingHashTable&lt; type &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">geopm
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.10 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="classes.html"><span>Class&#160;Index</span></a></li>
      <li><a href="inherits.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacegeopm.html">geopm</a></li><li class="navelem"><a class="el" href="classgeopm_1_1_locking_hash_table.html">LockingHashTable</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-methods">Protected Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a> &#124;
<a href="classgeopm_1_1_locking_hash_table-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">geopm::LockingHashTable&lt; type &gt; Class Template Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Templated container for multi-threaded or multi-process producer consumer data exchange.  
 <a href="classgeopm_1_1_locking_hash_table.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="_locking_hash_table_8hpp_source.html">LockingHashTable.hpp</a>&gt;</code></p>
<div class="dynheader">
Collaboration diagram for geopm::LockingHashTable&lt; type &gt;:</div>
<div class="dyncontent">
<div class="center"><img src="classgeopm_1_1_locking_hash_table__coll__graph.png" border="0" usemap="#geopm_1_1_locking_hash_table_3_01type_01_4_coll__map" alt="Collaboration graph"/></div>
<map name="geopm_1_1_locking_hash_table_3_01type_01_4_coll__map" id="geopm_1_1_locking_hash_table_3_01type_01_4_coll__map">
<area shape="rect" id="node2" href="structgeopm_1_1_locking_hash_table_1_1table__entry__s.html" title="geopm::LockingHashTable\l\&lt; type \&gt;::table_entry_s" alt="" coords="5,5,184,44"/>
</map>
<center><span class="legend">[<a href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structgeopm_1_1_locking_hash_table_1_1table__entry__s.html">table_entry_s</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a87495c9825486aaa9e69475e3184af49"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a87495c9825486aaa9e69475e3184af49">LockingHashTable</a> (size_t size, void *buffer)</td></tr>
<tr class="memdesc:a87495c9825486aaa9e69475e3184af49"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the <a class="el" href="classgeopm_1_1_locking_hash_table.html" title="Templated container for multi-threaded or multi-process producer consumer data exchange. ">LockingHashTable</a> template.  <a href="#a87495c9825486aaa9e69475e3184af49">More...</a><br /></td></tr>
<tr class="separator:a87495c9825486aaa9e69475e3184af49"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a22b7743c2157294c1a8e3de73ae32206"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a22b7743c2157294c1a8e3de73ae32206">~LockingHashTable</a> ()</td></tr>
<tr class="memdesc:a22b7743c2157294c1a8e3de73ae32206"><td class="mdescLeft">&#160;</td><td class="mdescRight"><a class="el" href="classgeopm_1_1_locking_hash_table.html" title="Templated container for multi-threaded or multi-process producer consumer data exchange. ">LockingHashTable</a> destructor, virtual.  <a href="#a22b7743c2157294c1a8e3de73ae32206">More...</a><br /></td></tr>
<tr class="separator:a22b7743c2157294c1a8e3de73ae32206"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac37a748e51f287418726c1162dddb283"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#ac37a748e51f287418726c1162dddb283">key</a> (const std::string &amp;name)</td></tr>
<tr class="memdesc:ac37a748e51f287418726c1162dddb283"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hash the name string into a random 64 bit integer.  <a href="#ac37a748e51f287418726c1162dddb283">More...</a><br /></td></tr>
<tr class="separator:ac37a748e51f287418726c1162dddb283"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a950a82d4b686efb7f0d7f0ece6649619"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a950a82d4b686efb7f0d7f0ece6649619">insert</a> (uint64_t <a class="el" href="classgeopm_1_1_locking_hash_table.html#ac37a748e51f287418726c1162dddb283">key</a>, const type &amp;value)</td></tr>
<tr class="memdesc:a950a82d4b686efb7f0d7f0ece6649619"><td class="mdescLeft">&#160;</td><td class="mdescRight">Insert a value into the table.  <a href="#a950a82d4b686efb7f0d7f0ece6649619">More...</a><br /></td></tr>
<tr class="separator:a950a82d4b686efb7f0d7f0ece6649619"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c905ee51c74e54656f8092c4967d666"><td class="memItemLeft" align="right" valign="top">type&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a1c905ee51c74e54656f8092c4967d666">find</a> (uint64_t <a class="el" href="classgeopm_1_1_locking_hash_table.html#ac37a748e51f287418726c1162dddb283">key</a>)</td></tr>
<tr class="memdesc:a1c905ee51c74e54656f8092c4967d666"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns a copy of the data associated with the key.  <a href="#a1c905ee51c74e54656f8092c4967d666">More...</a><br /></td></tr>
<tr class="separator:a1c905ee51c74e54656f8092c4967d666"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a102a414c443114e4db63458e1019215e"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a102a414c443114e4db63458e1019215e">capacity</a> (void) const </td></tr>
<tr class="memdesc:a102a414c443114e4db63458e1019215e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Maximum number of entries the table can hold.  <a href="#a102a414c443114e4db63458e1019215e">More...</a><br /></td></tr>
<tr class="separator:a102a414c443114e4db63458e1019215e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aeee8e97724e289d543340ac5bca72fc6"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#aeee8e97724e289d543340ac5bca72fc6">dump</a> (typename std::vector&lt; std::pair&lt; uint64_t, type &gt; &gt;::iterator content, size_t &amp;length)</td></tr>
<tr class="memdesc:aeee8e97724e289d543340ac5bca72fc6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Copy all table entries into a vector and delete all entries.  <a href="#aeee8e97724e289d543340ac5bca72fc6">More...</a><br /></td></tr>
<tr class="separator:aeee8e97724e289d543340ac5bca72fc6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a09faf78315a2cb373888bde477cf8698"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a09faf78315a2cb373888bde477cf8698">name_fill</a> (size_t header_offset)</td></tr>
<tr class="memdesc:a09faf78315a2cb373888bde477cf8698"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the producer to pass names to the consumer.  <a href="#a09faf78315a2cb373888bde477cf8698">More...</a><br /></td></tr>
<tr class="separator:a09faf78315a2cb373888bde477cf8698"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a98141b9d5efdeb0a1f615059335a5936"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a98141b9d5efdeb0a1f615059335a5936">name_set</a> (size_t header_offset, std::set&lt; std::string &gt; &amp;name)</td></tr>
<tr class="memdesc:a98141b9d5efdeb0a1f615059335a5936"><td class="mdescLeft">&#160;</td><td class="mdescRight">Called by the consumer to receive the names that hash to the keys.  <a href="#a98141b9d5efdeb0a1f615059335a5936">More...</a><br /></td></tr>
<tr class="separator:a98141b9d5efdeb0a1f615059335a5936"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-methods"></a>
Protected Member Functions</h2></td></tr>
<tr class="memitem:abd9169f4ba7a25bd3b9d3d958c84ddff"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#abd9169f4ba7a25bd3b9d3d958c84ddff">hash</a> (uint64_t <a class="el" href="classgeopm_1_1_locking_hash_table.html#ac37a748e51f287418726c1162dddb283">key</a>) const </td></tr>
<tr class="separator:abd9169f4ba7a25bd3b9d3d958c84ddff"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0130f4c53999fc7a4197716840e9543b"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a0130f4c53999fc7a4197716840e9543b">table_length</a> (size_t buffer_size) const </td></tr>
<tr class="separator:a0130f4c53999fc7a4197716840e9543b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr class="memitem:ae58271629ea06e3c75d25c84364e87ce"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#ae58271629ea06e3c75d25c84364e87ce">m_buffer_size</a></td></tr>
<tr class="separator:ae58271629ea06e3c75d25c84364e87ce"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2a496a0cfd9edd2462398d245cc3d7c9"><td class="memItemLeft" align="right" valign="top">size_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a2a496a0cfd9edd2462398d245cc3d7c9">m_table_length</a></td></tr>
<tr class="separator:a2a496a0cfd9edd2462398d245cc3d7c9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a821d6f2ffcad9ddb3147395d51612cae"><td class="memItemLeft" align="right" valign="top">uint64_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a821d6f2ffcad9ddb3147395d51612cae">m_mask</a></td></tr>
<tr class="separator:a821d6f2ffcad9ddb3147395d51612cae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1f4a287806cbc567ae1827bc73458dbb"><td class="memItemLeft" align="right" valign="top">struct <a class="el" href="structgeopm_1_1_locking_hash_table_1_1table__entry__s.html">table_entry_s</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a1f4a287806cbc567ae1827bc73458dbb">m_table</a></td></tr>
<tr class="separator:a1f4a287806cbc567ae1827bc73458dbb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aecbf3ac59fb5510c0e03c3011c9e7e3a"><td class="memItemLeft" align="right" valign="top">pthread_mutex_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#aecbf3ac59fb5510c0e03c3011c9e7e3a">m_key_map_lock</a></td></tr>
<tr class="separator:aecbf3ac59fb5510c0e03c3011c9e7e3a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e5b415b100dad08b18c96caf7262d79"><td class="memItemLeft" align="right" valign="top">std::map&lt; const std::string, uint64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a9e5b415b100dad08b18c96caf7262d79">m_key_map</a></td></tr>
<tr class="separator:a9e5b415b100dad08b18c96caf7262d79"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aac512880bd1c9ee9b63cfe1a8292e752"><td class="memItemLeft" align="right" valign="top">std::set&lt; uint64_t &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#aac512880bd1c9ee9b63cfe1a8292e752">m_key_set</a></td></tr>
<tr class="separator:aac512880bd1c9ee9b63cfe1a8292e752"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaa215e7cdf1a89813b10db348ad42b2f"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#aaa215e7cdf1a89813b10db348ad42b2f">m_is_pshared</a></td></tr>
<tr class="separator:aaa215e7cdf1a89813b10db348ad42b2f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1bc51e9329bf0c1e27409fd392dbee2d"><td class="memItemLeft" align="right" valign="top">std::map&lt; const std::string, uint64_t &gt;::iterator&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classgeopm_1_1_locking_hash_table.html#a1bc51e9329bf0c1e27409fd392dbee2d">m_key_map_last</a></td></tr>
<tr class="separator:a1bc51e9329bf0c1e27409fd392dbee2d"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><h3>template&lt;class type&gt;<br />
class geopm::LockingHashTable&lt; type &gt;</h3>

<p>Templated container for multi-threaded or multi-process producer consumer data exchange. </p>
<p>The <a class="el" href="classgeopm_1_1_locking_hash_table.html" title="Templated container for multi-threaded or multi-process producer consumer data exchange. ">LockingHashTable</a> container uses a block of virtual address space to support producer consumer data access. The table is intended to support references which are registered once and used multiple times. The registering of a reference requires a string name as input and provides a randomized hash of the string to an unsigned 64 bit integer key. The key is then used for subsequent references to the templated type supported by the container. The <a class="el" href="classgeopm_1_1_locking_hash_table.html" title="Templated container for multi-threaded or multi-process producer consumer data exchange. ">LockingHashTable</a> is optimized for many writers and one reader who scans the entire table by calling <a class="el" href="classgeopm_1_1_locking_hash_table.html#aeee8e97724e289d543340ac5bca72fc6" title="Copy all table entries into a vector and delete all entries. ">LockingHashTable::dump()</a>, however it can support other use cases as well. The buffer that is used to store the data is provided at creation time. This buffer can have any number of operating system memory policies applied including inter-process shared memory. See the <a class="el" href="classgeopm_1_1_shared_memory.html" title="This class encapsulates the creation of inter-process shared memory. ">geopm::SharedMemory</a> class for information on usage with POSIX inter-process shared memory. </p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a87495c9825486aaa9e69475e3184af49"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::<a class="el" href="classgeopm_1_1_locking_hash_table.html">LockingHashTable</a> </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>buffer</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Constructor for the <a class="el" href="classgeopm_1_1_locking_hash_table.html" title="Templated container for multi-threaded or multi-process producer consumer data exchange. ">LockingHashTable</a> template. </p>
<p>The memory that is used by the container is provided at construction time. There are other ancillary data associated with the structure which are dynamic, but the templated data container is of fixed size.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">size</td><td>[in] The length of the buffer in bytes.</td></tr>
    <tr><td class="paramname">buffer</td><td>[in] Pointer to beginning of virtual address range used for storing the templated data. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a22b7743c2157294c1a8e3de73ae32206"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::~<a class="el" href="classgeopm_1_1_locking_hash_table.html">LockingHashTable</a> </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p><a class="el" href="classgeopm_1_1_locking_hash_table.html" title="Templated container for multi-threaded or multi-process producer consumer data exchange. ">LockingHashTable</a> destructor, virtual. </p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a102a414c443114e4db63458e1019215e"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::capacity </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Maximum number of entries the table can hold. </p>
<p>Returns the upper bound on the number of values that can be stored in the table. This can be used to size the content vector passed to the <a class="el" href="classgeopm_1_1_locking_hash_table.html#aeee8e97724e289d543340ac5bca72fc6" title="Copy all table entries into a vector and delete all entries. ">dump()</a> method. In general there will be many fewer entries into the table than the number returned by <a class="el" href="classgeopm_1_1_locking_hash_table.html#a102a414c443114e4db63458e1019215e" title="Maximum number of entries the table can hold. ">capacity()</a> before a <a class="el" href="classgeopm_1_1_exception.html" title="Class for all geopm specific exceptions. ">geopm::Exception</a> with error_value() of GEOPM_TOO_MANY_COLLISIONS is thrown at time of insertion.</p>
<dl class="section return"><dt>Returns</dt><dd>The maximum number of entries the table can hold. </dd></dl>

</div>
</div>
<a class="anchor" id="aeee8e97724e289d543340ac5bca72fc6"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::dump </td>
          <td>(</td>
          <td class="paramtype">typename std::vector&lt; std::pair&lt; uint64_t, type &gt; &gt;::iterator&#160;</td>
          <td class="paramname"><em>content</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">size_t &amp;&#160;</td>
          <td class="paramname"><em>length</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Copy all table entries into a vector and delete all entries. </p>
<p>This method is used by the data consumer to empty the table of all posted contents into a vector. When the table is used in this way it serves as a temporary scratch-pad for relaying messages from the producer to the consumer. Note that the content vector is not re-sized and it should be sized according to the value returned by <a class="el" href="classgeopm_1_1_locking_hash_table.html#a102a414c443114e4db63458e1019215e" title="Maximum number of entries the table can hold. ">capacity()</a>. Only the first "length" elements of the vector will be written to by <a class="el" href="classgeopm_1_1_locking_hash_table.html#aeee8e97724e289d543340ac5bca72fc6" title="Copy all table entries into a vector and delete all entries. ">dump()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[out]</td><td class="paramname">content</td><td>The vector of key value pairs copied out of the table.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">length</td><td>The number of entries copied into the content vector. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a1c905ee51c74e54656f8092c4967d666"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">type <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::find </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Returns a copy of the data associated with the key. </p>
<p>Used to access a specific element of data from the table without deleting the entry. If there is no data associated with the key or the data has been deleted by a call to <a class="el" href="classgeopm_1_1_locking_hash_table.html#aeee8e97724e289d543340ac5bca72fc6" title="Copy all table entries into a vector and delete all entries. ">dump()</a> then a <a class="el" href="classgeopm_1_1_exception.html" title="Class for all geopm specific exceptions. ">geopm::Exception</a> is thrown with an error_value() of GEOPM_ERROR_INVALID.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The integer returned by <a class="el" href="classgeopm_1_1_locking_hash_table.html#ac37a748e51f287418726c1162dddb283" title="Hash the name string into a random 64 bit integer. ">key()</a> when the name was registered. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="abd9169f4ba7a25bd3b9d3d958c84ddff"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::hash </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>key</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a950a82d4b686efb7f0d7f0ece6649619"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::insert </td>
          <td>(</td>
          <td class="paramtype">uint64_t&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const type &amp;&#160;</td>
          <td class="paramname"><em>value</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Insert a value into the table. </p>
<p>Once the name has been registered with a call to <a class="el" href="classgeopm_1_1_locking_hash_table.html#ac37a748e51f287418726c1162dddb283" title="Hash the name string into a random 64 bit integer. ">key()</a> the data associated with the name can be inserted into the table by the producer using this function. If there is already a value associated with the key then the value will be overwritten. There is a fixed number of collisions allowed, and if too many keys hashed to the same entry in the table a <a class="el" href="classgeopm_1_1_exception.html" title="Class for all geopm specific exceptions. ">geopm::Exception</a> will be thrown with error_value() of GEOPM_ERROR_TOO_MANY_COLLISIONS.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">key</td><td>The value returned by <a class="el" href="classgeopm_1_1_locking_hash_table.html#ac37a748e51f287418726c1162dddb283" title="Hash the name string into a random 64 bit integer. ">key()</a> when the name was registered.</td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">value</td><td>Entry that is to be inserted into the table.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Returns the 64 bit hash used to reference the name in other <a class="el" href="classgeopm_1_1_locking_hash_table.html" title="Templated container for multi-threaded or multi-process producer consumer data exchange. ">LockingHashTable</a> methods. </dd></dl>

</div>
</div>
<a class="anchor" id="ac37a748e51f287418726c1162dddb283"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::key </td>
          <td>(</td>
          <td class="paramtype">const std::string &amp;&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hash the name string into a random 64 bit integer. </p>
<p>Uses the <a class="el" href="geopm__hash_8c.html#a3618c5db703759ced79117700cb41024">geopm_crc32_str()</a> function to hash the name which will modify the lower 32 bits. The remaining 32 bits may be used for other purposes in the future. Subsequent calls to hash the same string will use a string to integer std::map rather than re-hashing.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">name</td><td>String which is to be mapped to the key. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a09faf78315a2cb373888bde477cf8698"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::name_fill </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>header_offset</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called by the producer to pass names to the consumer. </p>
<p>When this method is called the data producer will pass the names that have been thus far been passed to <a class="el" href="classgeopm_1_1_locking_hash_table.html#ac37a748e51f287418726c1162dddb283" title="Hash the name string into a random 64 bit integer. ">key()</a> through the buffer to the consumer who will call <a class="el" href="classgeopm_1_1_locking_hash_table.html#a98141b9d5efdeb0a1f615059335a5936" title="Called by the consumer to receive the names that hash to the keys. ">name_set()</a> to receive the names. There is an option to avoid writing to the beginning of the buffer so that it can be reserved for passing other information. If the header_offset is zero then the entire buffer is used. This call will block until the consumer calls <a class="el" href="classgeopm_1_1_locking_hash_table.html#a98141b9d5efdeb0a1f615059335a5936" title="Called by the consumer to receive the names that hash to the keys. ">name_set()</a>.</p>
<p>NOTE: The <a class="el" href="classgeopm_1_1_locking_hash_table.html" title="Templated container for multi-threaded or multi-process producer consumer data exchange. ">LockingHashTable</a> cannot be used again after a call to <a class="el" href="classgeopm_1_1_locking_hash_table.html#a09faf78315a2cb373888bde477cf8698" title="Called by the producer to pass names to the consumer. ">name_fill()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">header_offset</td><td>Offset in bytes to where the name values will start in the buffer. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a98141b9d5efdeb0a1f615059335a5936"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type &gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::name_set </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>header_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">std::set&lt; std::string &gt; &amp;&#160;</td>
          <td class="paramname"><em>name</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Called by the consumer to receive the names that hash to the keys. </p>
<p>Through calling <a class="el" href="classgeopm_1_1_locking_hash_table.html#aeee8e97724e289d543340ac5bca72fc6" title="Copy all table entries into a vector and delete all entries. ">dump()</a> the consumer will receive a set of integer keys. This method enables the consumer to learn the names that can be hashed to the keys it has received. There is an option to avoid writing to the beginning of the buffer so that it can be reserved for passing other information. If the header_offset is zero then the entire buffer is used. This call will block until the producer calls <a class="el" href="classgeopm_1_1_locking_hash_table.html#a09faf78315a2cb373888bde477cf8698" title="Called by the producer to pass names to the consumer. ">name_fill()</a>.</p>
<p>NOTE: The <a class="el" href="classgeopm_1_1_locking_hash_table.html" title="Templated container for multi-threaded or multi-process producer consumer data exchange. ">LockingHashTable</a> cannot be used again after a call to <a class="el" href="classgeopm_1_1_locking_hash_table.html#a98141b9d5efdeb0a1f615059335a5936" title="Called by the consumer to receive the names that hash to the keys. ">name_set()</a>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">header_offset</td><td>Offset in bytes to where the name values will start in the buffer.</td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">name</td><td>Set of names read from output of the producer's call to <a class="el" href="classgeopm_1_1_locking_hash_table.html#a09faf78315a2cb373888bde477cf8698" title="Called by the producer to pass names to the consumer. ">name_fill()</a>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a0130f4c53999fc7a4197716840e9543b"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::table_length </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>buffer_size</em></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a class="anchor" id="ae58271629ea06e3c75d25c84364e87ce"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::m_buffer_size</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aaa215e7cdf1a89813b10db348ad42b2f"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">bool <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::m_is_pshared</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a9e5b415b100dad08b18c96caf7262d79"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;const std::string, uint64_t&gt; <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::m_key_map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1bc51e9329bf0c1e27409fd392dbee2d"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::map&lt;const std::string, uint64_t&gt;::iterator <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::m_key_map_last</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aecbf3ac59fb5510c0e03c3011c9e7e3a"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">pthread_mutex_t <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::m_key_map_lock</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="aac512880bd1c9ee9b63cfe1a8292e752"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">std::set&lt;uint64_t&gt; <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::m_key_set</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a821d6f2ffcad9ddb3147395d51612cae"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint64_t <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::m_mask</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a1f4a287806cbc567ae1827bc73458dbb"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">struct <a class="el" href="structgeopm_1_1_locking_hash_table_1_1table__entry__s.html">table_entry_s</a>* <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::m_table</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="a2a496a0cfd9edd2462398d245cc3d7c9"></a>
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class type&gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">size_t <a class="el" href="classgeopm_1_1_locking_hash_table.html">geopm::LockingHashTable</a>&lt; type &gt;::m_table_length</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">protected</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>src/<a class="el" href="_locking_hash_table_8hpp_source.html">LockingHashTable.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.10
</small></address>
</body>
</html>
